<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="lib/mustache.js"></script>
<script type="text/javascript" src="lib/multigraph/build/multigraph-min.js"></script>
<!-- <script type="text/javascript" src="lib/multigraph-touch.js"></script> -->
<!-- <script type="text/javascript" src="lib/jquery-ui-1.9.0.custom/js/jquery-1.8.2.js"></script> -->
<script type="text/javascript">$ = jQuery = window.multigraph.jQuery;</script>
<script type="text/javascript" src="lib/jquery-ui-1.9.0.custom/js/jquery-ui-1.9.0.custom.min.js"></script>
<link rel="stylesheet" href="lib/jquery-ui-1.9.0.custom/css/smoothness/jquery-ui-1.9.0.custom.css"></link>

<link rel="stylesheet" href="expandable-dashboard-graph.css"></link>
<script type="text/javascript" src="expandable-dashboard-graph.js"></script>

<style type="text/css">
#dashboard {
  border-radius:10px;
  -moz-border-radius:10px;
  background: #5a5b5b;
  color: #ffffff;
  padding: 10px;
  width: auto;
}
</style>

<script type="text/javascript">

$(document).ready(function() {

    $.ajax({"url"      : "config/dashboard.xml",
            "dataType" : "text",
            "success"  : function (data) {
              var configxml = window.multigraph.parser.jquery.stringToJQueryXMLObj(data);
              configxml.find("graph").each(function() {
                 var id = $(this).attr('id');
                 var initiallyExpanded = ( $(this).attr('initiallyopen') === "true" );
                 var mugl = 'config/' + $(this).find('mugl').attr('url')
                 var title = $(this).find('>title').text();
                 var stats = {
                   color : '#ffffff',
                   stat  : []
                 };
                 var statscolor = $(this).find('stats').attr('color');
                 if (statscolor !== undefined) {
                   stats.color = statscolor;
                 }
                 $(this).find('stats stat').each(function () {
                   var title = $(this).find('title').text();
                   var value = $(this).find('value').text();
                   stats.stat.push( { title : title, value : value } );
                 });
                 $('<div>', {
                   id    : 'EDG'+id,
                   class : 'EDG'
                 }).appendTo($('#dashboard')).expandable_dashboard_graph({
                   id                : id + 'Graph',
                   title             : title,
                   mugl              : mugl,
                   initiallyExpanded : initiallyExpanded,
                   stats             : stats
                 });
              });


            }});

    

});
</script>

</head>
<body>
<div id="message"></div>
<table><tr><td>
<div id="dashboard"></div>
</td></tr></table>
</body>
</html>
