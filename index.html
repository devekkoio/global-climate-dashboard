<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="lib/mustache.js"></script>
<!-- <script type="text/javascript" src="lib/multigraph/build/multigraph-min.js"></script> -->
<script type="text/javascript" src="lib/multigraph-touch.js"></script>
<!-- <script type="text/javascript" src="lib/jquery-ui-1.9.0.custom/js/jquery-1.8.2.js"></script> -->
<script type="text/javascript">$ = jQuery = window.multigraph.jQuery;</script>
<script type="text/javascript" src="lib/jquery-ui-1.9.0.custom/js/jquery-ui-1.9.0.custom.min.js"></script>
<link rel="stylesheet" href="lib/jquery-ui-1.9.0.custom/css/smoothness/jquery-ui-1.9.0.custom.css"></link>

<link rel="stylesheet" href="expandable-dashboard-graph.css"></link>
<script type="text/javascript" src="expandable-dashboard-graph.js"></script>

<script type="text/javascript">

$(document).ready(function() {

    $.ajax({"url"      : "config/dashboard.xml",
            "dataType" : "text",
            "success"  : function (data) {
              var configxml = window.multigraph.parser.jquery.stringToJQueryXMLObj(data);
              configxml.find("graph").each(function() {
                 var id = $(this).attr('id');
                 var initiallyExpanded = ( $(this).attr('initiallyopen') === "true" );
                 var mugl = 'config/' + $(this).find('mugl').attr('url')
                 var title = $(this).find('title').text();
                 $('<div>', {
                   id    : 'EDG'+id,
                   class : 'EDG'
                 }).appendTo($('#dashboard')).expandable_dashboard_graph({
                   id                : id + 'Graph',
                   title             : title,
                   mugl              : mugl,
                   initiallyExpanded : initiallyExpanded
                 });
              });

              setTimeout(function() {
                $('.EDG').expandable_dashboard_graph('expand');
                setTimeout(function() {
                  $('.EDG').expandable_dashboard_graph('collapse');
                    setTimeout(function() {
                      $('#EDGco2').expandable_dashboard_graph('expand');
                    }, 500);
                }, 1000);
              }, 2000);

            }});

    

});
</script>

</head>
<body>
<div id="message"></div>
<div id="dashboard"></div>
</body>
</html>
